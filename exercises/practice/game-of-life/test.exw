include game-of-life.e

set_test_verbosity(TEST_SHOW_ALL)

constant tests = {        -- {{description,input,expected}}

{"empty matrix", {},
                 {}},

{"live cells with zero live neighbors die", {{0,0,0},
                                             {0,1,0},
                                             {0,0,0}},
                                            {{0,0,0},
                                             {0,0,0},
                                             {0,0,0}}},

{"live cells with only one live neighbor die", {{0,0,0},
                                                {0,1,0},
                                                {0,1,0}},
                                               {{0,0,0},
                                                {0,0,0},
                                                {0,0,0}}},

{"live cells with two live neighbors stay alive", {{1,0,1},
                                                   {1,0,1},
                                                   {1,0,1}},
                                                  {{0,0,0},
                                                   {1,0,1},
                                                   {0,0,0}}},

{"live cells with three live neighbors stay alive", {{0,1,0},
                                                     {1,0,0},
                                                     {1,1,0}},
                                                    {{0,0,0},
                                                     {1,0,0},
                                                     {1,1,0}}},

{"dead cells with three live neighbors become alive", {{1,1,0},
                                                       {0,0,0},
                                                       {1,0,0}},
                                                      {{0,0,0},
                                                       {1,1,0},
                                                       {0,0,0}}},

{"live cells with four or more neighbors die", {{1,1,1},
                                                {1,1,1},
                                                {1,1,1}},
                                               {{1,0,1},
                                                {0,0,0},
                                                {1,0,1}}},

{"bigger matrix", {{1,1,0,1,1,0,0,0},
                   {1,0,1,1,0,0,0,0},
                   {1,1,1,0,0,1,1,1},
                   {0,0,0,0,0,1,1,0},
                   {1,0,0,0,1,1,0,0},
                   {1,1,0,0,0,1,1,1},
                   {0,0,1,0,1,0,0,1},
                   {1,0,0,0,0,0,1,1}},
                  {{1,1,0,1,1,0,0,0},
                   {0,0,0,0,0,1,1,0},
                   {1,0,1,1,1,1,0,1},
                   {1,0,0,0,0,0,0,1},
                   {1,1,0,0,1,0,0,1},
                   {1,1,0,1,0,0,0,1},
                   {1,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,1,1}}},
}

for t in tests do
    sequence {desc,input,expected} = t
    test_equal(tick(input),expected,desc)
end for

test_summary()
