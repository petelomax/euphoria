include dominoes.e

constant tests = {
    {"empty input cannot make a chain!",{},false},
    {"singleton input = singleton output",{{1, 1}},true},
    {"singleton that can't be chained",{{1, 2}},false},
    {"three elements",{{1, 2}, {3, 1}, {2, 3}},true},
    {"can reverse dominoes",{{1, 2}, {1, 3}, {2, 3}},true},
    {"can't be chained",{{1, 2}, {4, 1}, {2, 3}},false},
    {"disconnected - simple",{{1, 1}, {2, 2}},false},
    {"disconnected - double loop",{{1, 2}, {2, 1}, {3, 4}, {4, 3}},false},
    {"disconnected - single isolated",{{1, 2}, {2, 3}, {3, 1}, {4, 4}},false},
    {"need backtrack",{{1, 2}, {2, 3}, {3, 1}, {2, 4}, {2, 4}},true},
    {"separate loops",{{1, 2}, {2, 3}, {3, 1}, {1, 1}, {2, 2}, {3, 3}},true},
    {"nine elements",{{1, 2}, {5, 3}, {3, 1}, {1, 2}, {2, 4}, {1, 6}, {2, 3}, {3, 4}, {5, 6}},true},
}

set_test_verbosity(TEST_SHOW_ALL)
for t in tests do
    test_equal(make_chain(t[2])[2],t[3],t[1])
end for
test_summary()

